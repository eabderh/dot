# http
server {
	server_name dev-fallacker.bananalias.xyz;
	listen 80;
	return 301 https://$host$request_uri;
}

# https
server {
	server_name dev-fallacker.bananalias.xyz;

	listen 443 ssl;
	ssl_certificate 
		/etc/letsencrypt/live/bananalias.xyz/fullchain.pem;
	ssl_certificate_key 
		/etc/letsencrypt/live/bananalias.xyz/privkey.pem;

	location / {
		proxy_pass http://localhost:6666;
	}

	location /sock {
		# prod
		proxy_pass http://[fc77::aff1]:6889;
		#proxy_pass http://localhost:6889;
		proxy_http_version 1.1;
		proxy_set_header Host $http_host;
		proxy_set_header X-Real-IP $remote_addr;
		proxy_set_header Upgrade $http_upgrade;
		proxy_set_header Connection "upgrade";
		proxy_redirect off;
	}
}
#server {
#	listen 80;
#	server_name dev-fallacker.bananalias.xyz;
#
#	location /io/ {
#		add_header 'Access-Control-Allow-Origin' 'http://webpack.bananalias.xyz';
#
#		proxy_pass http://[fcec:7cfd:6215:d55a:f135:cebd:1398:4a7d]:6010/;
#		proxy_http_version 1.1;
#		proxy_set_header Host $http_host;
#		proxy_set_header X-Real-IP $remote_addr;
#		proxy_set_header Upgrade $http_upgrade;
#		proxy_set_header Connection "upgrade";
#		proxy_redirect off;
#	}
#}

